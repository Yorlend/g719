/*--------------------------------------------------------------------------*/
/* ITU-T G.719 Source Code                                                  */
/* > Software Release 1.0a (2008-06)                                        */
/* © 2008 Ericsson AB. and Polycom Inc.                                     */
/* All rights reserved.                                                     */
/*--------------------------------------------------------------------------*/

#include "stl.h"
#include "cnst.h"

Word16 sin_win[480] =
{  -23189, -23227, -23265, -23303, -23340, -23378, -23416, -23453, -23490, -23528, -23565, -23602,
   -23639, -23677, -23714, -23751, -23788, -23824, -23861, -23898, -23935, -23971, -24008, -24044,
   -24080, -24117, -24153, -24189, -24225, -24261, -24297, -24333, -24369, -24405, -24441, -24477,
   -24512, -24548, -24583, -24619, -24654, -24689, -24724, -24760, -24795, -24830, -24865, -24900,
   -24934, -24969, -25004, -25038, -25073, -25107, -25142, -25176, -25211, -25245, -25279, -25313,
   -25347, -25381, -25415, -25449, -25482, -25516, -25550, -25583, -25617, -25650, -25683, -25717,
   -25750, -25783, -25816, -25849, -25882, -25915, -25948, -25980, -26013, -26045, -26078, -26110,
   -26143, -26175, -26207, -26239, -26272, -26304, -26335, -26367, -26399, -26431, -26463, -26494,
   -26526, -26557, -26588, -26620, -26651, -26682, -26713, -26744, -26775, -26806, -26837, -26868,
   -26898, -26929, -26959, -26990, -27020, -27050, -27081, -27111, -27141, -27171, -27201, -27231,
   -27260, -27290, -27320, -27349, -27379, -27408, -27438, -27467, -27496, -27525, -27554, -27583,
   -27612, -27641, -27670, -27698, -27727, -27756, -27784, -27812, -27841, -27869, -27897, -27925,
   -27953, -27981, -28009, -28037, -28065, -28092, -28120, -28147, -28175, -28202, -28229, -28257,
   -28284, -28311, -28338, -28365, -28391, -28418, -28445, -28471, -28498, -28524, -28551, -28577,
   -28603, -28629, -28655, -28681, -28707, -28733, -28759, -28784, -28810, -28835, -28861, -28886,
   -28911, -28937, -28962, -28987, -29012, -29037, -29061, -29086, -29111, -29135, -29160, -29184,
   -29209, -29233, -29257, -29281, -29305, -29329, -29353, -29377, -29401, -29424, -29448, -29471,
   -29495, -29518, -29541, -29564, -29587, -29610, -29633, -29656, -29679, -29702, -29724, -29747,
   -29769, -29792, -29814, -29836, -29858, -29880, -29902, -29924, -29946, -29968, -29989, -30011,
   -30032, -30054, -30075, -30096, -30118, -30139, -30160, -30181, -30201, -30222, -30243, -30263,
   -30284, -30304, -30325, -30345, -30365, -30385, -30405, -30425, -30445, -30465, -30485, -30504,
   -30524, -30543, -30563, -30582, -30601, -30620, -30639, -30658, -30677, -30696, -30715, -30733,
   -30752, -30770, -30789, -30807, -30825, -30843, -30862, -30880, -30897, -30915, -30933, -30951,
   -30968, -30986, -31003, -31020, -31038, -31055, -31072, -31089, -31106, -31123, -31139, -31156,
   -31172, -31189, -31205, -31222, -31238, -31254, -31270, -31286, -31302, -31318, -31334, -31349,
   -31365, -31380, -31396, -31411, -31426, -31441, -31456, -31471, -31486, -31501, -31516, -31530,
   -31545, -31559, -31574, -31588, -31602, -31616, -31631, -31645, -31658, -31672, -31686, -31700,
   -31713, -31727, -31740, -31753, -31766, -31779, -31792, -31805, -31818, -31831, -31844, -31856,
   -31869, -31881, -31894, -31906, -31918, -31930, -31942, -31954, -31966, -31978, -31989, -32001,
   -32012, -32024, -32035, -32046, -32057, -32069, -32080, -32090, -32101, -32112, -32123, -32133,
   -32144, -32154, -32164, -32174, -32185, -32195, -32205, -32214, -32224, -32234, -32243, -32253,
   -32262, -32272, -32281, -32290, -32299, -32308, -32317, -32326, -32335, -32343, -32352, -32360,
   -32369, -32377, -32385, -32393, -32401, -32409, -32417, -32425, -32433, -32440, -32448, -32455,
   -32463, -32470, -32477, -32484, -32491, -32498, -32505, -32512, -32518, -32525, -32531, -32538, 
   -32544, -32550, -32556, -32562, -32568, -32574, -32580, -32586, -32591, -32597, -32602, -32608,
   -32613, -32618, -32623, -32628, -32633, -32638, -32643, -32647, -32652, -32656, -32661, -32665,
   -32669, -32673, -32677, -32681, -32685, -32689, -32692, -32696, -32700, -32703, -32706, -32710,
   -32713, -32716, -32719, -32722, -32724, -32727, -32730, -32732, -32735, -32737, -32739, -32742,
   -32744, -32746, -32748, -32750, -32751, -32753, -32755, -32756, -32757, -32759, -32760, -32761,
   -32762, -32763, -32764, -32765, -32766, -32766, -32767, -32767, -32767, -32768, -32768, -32768};

Word16 cos_win[480] =
{  23152, 23114, 23075, 23037, 22999, 22961, 22923, 22884, 22846, 22808, 22769, 22730, 22692,
   22653, 22614, 22575, 22537, 22498, 22459, 22420, 22380, 22341, 22302, 22263, 22223, 22184,
   22144, 22105, 22065, 22026, 21986, 21946, 21906, 21866, 21826, 21786, 21746, 21706, 21666,
   21626, 21585, 21545, 21504, 21464, 21423, 21383, 21342, 21301, 21261, 21220, 21179, 21138,
   21097, 21056, 21015, 20974, 20933, 20891, 20850, 20808, 20767, 20726, 20684, 20642, 20601,
   20559, 20517, 20475, 20434, 20392, 20350, 20308, 20265, 20223, 20181, 20139, 20096, 20054,
   20012, 19969, 19927, 19884, 19841, 19799, 19756, 19713, 19670, 19627, 19584, 19541, 19498,
   19455, 19412, 19369, 19326, 19282, 19239, 19195, 19152, 19108, 19065, 19021, 18978, 18934,
   18890, 18846, 18802, 18758, 18714, 18670, 18626, 18582, 18538, 18494, 18449, 18405, 18361,
   18316, 18272, 18227, 18183, 18138, 18093, 18049, 18004, 17959, 17914, 17869, 17824, 17779,
   17734, 17689, 17644, 17599, 17553, 17508, 17463, 17417, 17372, 17326, 17281, 17235, 17190,
   17144, 17098, 17053, 17007, 16961, 16915, 16869, 16823, 16777, 16731, 16685, 16639, 16593,
   16546, 16500, 16454, 16407, 16361, 16314, 16268, 16221, 16175, 16128, 16081, 16035, 15988,
   15941, 15894, 15847, 15800, 15753, 15706, 15659, 15612, 15565, 15518, 15470, 15423, 15376,
   15328, 15281, 15234, 15186, 15138, 15091, 15043, 14996, 14948, 14900, 14852, 14805, 14757,
   14709, 14661, 14613, 14565, 14517, 14469, 14421, 14373, 14324, 14276, 14228, 14180, 14131,
   14083, 14034, 13986, 13937, 13889, 13840, 13792, 13743, 13694, 13646, 13597, 13548, 13499,
   13450, 13401, 13352, 13303, 13254, 13205, 13156, 13107, 13058, 13009, 12960, 12910, 12861,
   12812, 12762, 12713, 12663, 12614, 12565, 12515, 12465, 12416, 12366, 12317, 12267, 12217,
   12167, 12118, 12068, 12018, 11968, 11918, 11868, 11818, 11768, 11718, 11668, 11618, 11568,
   11517, 11467, 11417, 11367, 11316, 11266, 11216, 11165, 11115, 11064, 11014, 10963, 10913,
   10862, 10812, 10761, 10710, 10660, 10609, 10558, 10508, 10457, 10406, 10355, 10304, 10253,
   10202, 10151, 10100, 10049,  9998,  9947,  9896, 9845, 9794, 9743, 9691, 9640, 9589, 9538, 
   9486,  9435,  9384,  9332,  9281,  9229,  9178, 9127, 9075, 9023, 8972, 8920, 8869, 8817, 
   8765,  8714,  8662,  8610,  8559,  8507,  8455, 8403, 8351, 8300, 8248, 8196, 8144, 8092,
   8040,  7988,  7936,  7884,  7832,  7780,  7728, 7676, 7623, 7571, 7519, 7467, 7415, 7362,
   7310,  7258,  7206,  7153,  7101,  7049,  6996, 6944, 6892, 6839, 6787, 6734, 6682, 6629,
   6577,  6524,  6472,  6419,  6366,  6314,  6261, 6209, 6156, 6103, 6051, 5998, 5945, 5892,
   5840,  5787,  5734,  5681,  5628,  5576,  5523, 5470, 5417, 5364, 5311, 5258, 5205, 5153,
   5100,  5047,  4994,  4941,  4888,  4835,  4782, 4728, 4675, 4622, 4569, 4516, 4463, 4410,
   4357,  4304,  4251,  4197,  4144,  4091,  4038, 3985, 3931, 3878, 3825, 3772, 3718, 3665,
   3612,  3558,  3505,  3452,  3399,  3345,  3292, 3238, 3185, 3132, 3078, 3025, 2972, 2918,
   2865,  2811,  2758,  2705,  2651,  2598,  2544, 2491, 2437, 2384, 2330, 2277, 2223, 2170,
   2116,  2063,  2009,  1956,  1902,  1849,  1795, 1742, 1688, 1635, 1581, 1528, 1474, 1420,
   1367,  1313,  1260,  1206,  1153,  1099,  1045, 992, 938, 885, 831, 777, 724, 670, 617,
   563,   509,  456,    402,   348,   295,  241, 188, 134, 80, 27}; 

const Word16 wscw16q15[240] =
{  -32768,   -32766,   -32764,   -32759,   -32754,   -32747,   -32738,   -32729,
   -32717,   -32705,   -32691,   -32675,   -32658,   -32640,   -32621,   -32600,
   -32577,   -32553,   -32528,   -32501,   -32473,   -32444,   -32413,   -32381,
   -32348,   -32313,   -32276,   -32239,   -32200,   -32159,   -32117,   -32074,
   -32029,   -31984,   -31936,   -31887,   -31837,   -31786,   -31733,   -31679,
   -31624,   -31567,   -31508,   -31449,   -31388,   -31326,   -31262,   -31197,
   -31131,   -31063,   -30994,   -30924,   -30853,   -30780,   -30705,   -30630,
   -30553,   -30475,   -30395,   -30315,   -30232,   -30149,   -30064,   -29979,
   -29891,   -29803,   -29713,   -29622,   -29530,   -29436,   -29341,   -29245,
   -29148,   -29049,   -28949,   -28848,   -28746,   -28642,   -28537,   -28431,
   -28324,   -28216,   -28106,   -27995,   -27883,   -27770,   -27655,   -27540,
   -27423,   -27305,   -27186,   -27066,   -26944,   -26821,   -26698,   -26573,
   -26447,   -26320,   -26191,   -26062,   -25931,   -25800,   -25667,   -25533,
   -25398,   -25262,   -25125,   -24986,   -24847,   -24707,   -24565,   -24423,
   -24279,   -24135,   -23989,   -23843,   -23695,   -23546,   -23397,   -23246,
    23095,    22942,    22788,    22634,    22478,    22322,    22164,    22006,
    21846,    21686,    21525,    21363,    21199,    21035,    20871,    20705,
    20538,    20371,    20202,    20033,    19863,    19692,    19520,    19347,
    19174,    18999,    18824,    18648,    18472,    18294,    18116,    17937,
    17757,    17576,    17395,    17213,    17030,    16846,    16662,    16477,
    16291,    16105,    15917,    15730,    15541,    15352,    15162,    14972,
    14781,    14589,    14397,    14204,    14010,    13816,    13621,    13426,
    13230,    13033,    12836,    12639,    12441,    12242,    12043,    11843,
    11643,    11442,    11241,    11039,    10837,    10634,    10431,    10228,
    10024,     9819,     9615,     9409,     9204,     8998,     8791,     8585,
     8377,     8170,     7962,     7754,     7545,     7336,     7127,     6918,
     6708,     6498,     6288,     6077,     5866,     5655,     5444,     5232,
     5020,     4808,     4596,     4383,     4171,     3958,     3745,     3532,
     3319,     3105,     2892,     2678,     2464,     2250,     2036,     1822,
     1608,     1394,     1179,      965,      751,      536,      322,      107
};

Word16 moreshift[4] = {
1, 2, 2, 2
};

Word16 inv_sbfsize[4] = {
4096, 2048, 1365, 1024
};

Word16 RV[10] = {
0, 1, 4, 8, 16, 32, 64, 128, 256, 512
};

Word16 dic0[10][8] = {
{0,  0,  0,  0,  0,  0,  0,  1},
{1,  0,  0,  0,  0,  0,  0,  0},
{0,  0,  0,  0,  0,  0,  1,  1},
{1,  0,  0,  0,  0,  0,  0,  1},
{1,  1,  0,  0,  0,  0,  0,  0},
{0,  0,  0,  0,  0,  0,  1,  1},
{0,  0,  0,  0,  1,  1,  1,  1},
{0,  0,  1,  1,  1,  1,  1,  1},
{1,  1,  1,  1,  1,  1,  1,  1},
{0,  0,  0,  0,  0,  0,  0,  0},
};
Word16 dic1[10][8] = {
{ 0,  0,  0,  0,  0,  0,  0, -2},
{ 2,  0,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0, -2, -2},
{ 2,  0,  0,  0,  0,  0,  0, -2},
{ 2,  2,  0,  0,  0,  0,  0,  0},
{ 1,  1,  1,  1,  1,  1, -1, -1},
{ 1,  1,  1,  1, -1, -1, -1, -1},
{ 1,  1, -1, -1, -1, -1, -1, -1},
{-1, -1, -1, -1, -1, -1, -1, -1},
{ 1,  1,  1,  1,  1,  1,  1,  1},
};
Word16 dic1Q8[10][8] = {
{   0,    0,    0,    0,    0,    0,    0, -512},
{ 512,    0,    0,    0,    0,    0,    0,    0},
{   0,    0,    0,    0,    0,    0, -512, -512},
{ 512,    0,    0,    0,    0,    0,    0, -512},
{ 512,  512,    0,    0,    0,    0,    0,    0},
{ 256,  256,  256,  256,  256,  256, -256, -256},
{ 256,  256,  256,  256, -256, -256, -256, -256},
{ 256,  256, -256, -256, -256, -256, -256, -256},
{-256, -256, -256, -256, -256, -256, -256, -256},
{ 256,  256,  256,  256,  256,  256,  256,  256},
};
Word16 dic2[10] = {
0, 8, 16, 44, 100, 128, 128, 128, 128, 128
};
Word16 dic3[256] = {
127,  0,   1,   0,   2,   1,   7,   0,   3,   2,   8,   0,  13,   0,   0,  28,
4,    3,   9,   0,  14,   0,   0,  29,  18,   0,   0,  33,   0,  43,  88,   0,
5,    4,  10,   0,  15,   0,   0,  30,  19,   0,   0,  34,   0,  44,  89,   0,
22,   0,   0,  37,   0,  47,  95,   0,   0,  57,  85,   0,  75,   0,   0, 125,
6,    5,  11,   0,  16,   0,   0,  31,  20,   0,   0,  35,   0,  45,  90,   0,
23,   0,   0,  38,   0,  48,  96,   0,   0,  58,  86,   0,  76,   0,   0, 124,
25,   0,   0,  42,   0,  52,  94,   0,   0,  62,  84,   0,  74,   0,   0, 122,
0,   56,  81,   0,  71,   0,   0, 119,  67,   0,   0, 115,   0, 110, 104,   0,
7,    6,  12,   0,  17,   0,   0,  32,  21,   0,   0,  36,   0,  46,  91,   0,
24,   0,   0,  39,   0,  49,  97,   0,   0,  59,  87,   0,  77,   0,   0, 123,
26,   0,   0,  41,   0,  51,  93,   0,   0,  61,  83,   0,  73,   0,   0, 121,
0,   55,  80,   0,  70,   0,   0, 118,  66,   0,   0, 114,   0, 109, 103,   0,
27,   0,   0,  40,   0,  50,  92,   0,   0,  60,  82,   0,  72,   0,   0, 120,
0,   54,  79,   0,  69,   0,   0, 117,  65,   0,   0, 113,   0, 108, 102,   0,
0,   53,  78,   0,  68,   0,   0, 116,  64,   0,   0, 112,   0, 107, 101,   0,
63,   0,   0, 111,   0, 106, 100,   0,   0, 105,  99,   0,  98,   0,   0, 126
};

Word16 huffnorm[32] = {
26, 58, 90, 122, 27, 59, 91, 123, 12, 28, 44,  60,  2,  6,  4,   6,
0,  2,  10,  14, 14, 30, 46,  62, 30, 62, 94, 126, 31, 63, 95, 127
};

Word16 huffcoef[60] = {
0, 6, 7,  2,
0, 1, 9, 16, 17, 10, 11, 3,
0, 6, 6,  7, 20, 21, 22, 46, 47, 16, 17, 18, 19, 4, 5, 7,
0, 2, 8, 20, 21, 48, 49, 50,  51, 112, 113, 114, 115, 116, 117, 118, 
119, 120, 121, 122, 123, 124, 125, 63, 52, 53, 54, 55, 22, 23, 9, 3
};
